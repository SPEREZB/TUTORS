import{c as R,r as U,a as j}from"../chunks/course.0b79902e.js";import{a as C}from"../chunks/stores.ee858f52.js";import{s as q,f as y,a as L,g as b,h as x,X as z,c as k,d as v,j as g,i as O,F as _,a0 as V,G as B,r as F,Y as G,o as X,U as Y,l as J,V as K,m as Q,n as W}from"../chunks/scheduler.a12d0be3.js";import{e as H}from"../chunks/each.cc42282b.js";import{S as Z,i as $}from"../chunks/index.208b70fa.js";import{b as ee}from"../chunks/markdown.7da8b841.js";const te=!1,ne=async({params:e,fetch:n})=>{const t=await R.readCourse(e.courseid,n);return C.set(t.lo),{course:t,lo:t.lo}},Ie=Object.freeze(Object.defineProperty({__proto__:null,load:ne,ssr:te},Symbol.toStringTag,{value:"Module"})),re=100,ae="```",le="~~~";function se(e,n){const t=ue(e),r=[];return t.forEach(a=>{var f;const s=a.lab.contentMd,l=oe(s,n);for(const i of l){const p={fenced:i.style!=="unfenced",language:i.language,contentMd:i.content,lab:a.lab,title:`${a.lab.parentLo.title}/${U(a.lab.title)}`,link:(f=a.lab)==null?void 0:f.route,html:""};p.link=p.link.substring(1),r.push(p)}}),r.slice(0,re)}function oe(e,n){const t=[],r=I(e,n);for(let a=0;a<r.length;a+=1){const s=_e(n,r[a],e),l=pe(e,r[a]);let f="";l==="fenced"&&(f=ie(e,r[a]));const i=ce(e,r[a]);t.push({content:s,style:l,fence:i,language:f})}return t}function ie(e,n){const t=w(e),r=A(t,n);let a="",s=r[1]+3;for(;e.charAt(s)!==`
`;)a+=e.charAt(s),s+=1;return a}function ce(e,n){const t=w(e),r=A(t,n);return e.charAt(r[1])==="~"?"~~~":"```"}function ue(e){return P(e,"")}function P(e,n,t=[]){for(let r=0,a=e.length;r<a;r++){const s=e[r];Array.isArray(s.los)?P(s.los,e[r].parent.lo.title,t):t.push({lab:s,topicTitle:n})}return t}function fe(e){return e.trim().length===0}function he(e){return!fe(e)}function I(e,n){const t=[];function r(a,s,l){let f=a.indexOf(s);if(f!=-1){const i=f;l.length&&(f+=l[l.length-1]+s.length),l.push(f),r(a.slice(i+s.length),s,l)}else return}return r(e,n,t),t}function w(e){const n=N(e,ae).concat(N(e,le));return de(n)}function de(e){return e.sort((n,t)=>n-t)}function pe(e,n){const t=w(e);if(t.length==0)return"unfenced";const r=A(t,n);return ge(r[0])?"fenced":"unfenced"}function N(e,n){return I(e,n)}function ge(e){return e%2==0}function _e(e,n,t){const r=I(t,ve()),a=A(r,n),s=me(r,n,t.length);return t.substring(a[1],s[1])}function A(e,n){for(let t=e.length-1;t>=0;t--)if(e[t]<n)return[t,e[t]];return[-1,-1]}function me(e,n,t){for(let r=0;r<e.length;r+=1){if(n>e[e.length-1])return[r,t];if(e[r]>n)return[r,e[r]]}return[-1,-1]}function ve(){return`
`}function D(e,n,t){const r=e.slice();return r[7]=n[t],r}function M(e){let n,t,r,a,s=e[7].html+"",l,f,i,p=e[7].title+"",m,d,u;return{c(){n=y("div"),t=y("div"),r=y("div"),a=new Y(!1),l=L(),f=y("div"),i=y("a"),m=J(p),u=L(),this.h()},l(o){n=b(o,"DIV",{class:!0});var h=x(n);t=b(h,"DIV",{});var c=x(t);r=b(c,"DIV",{});var S=x(r);a=K(S,!1),S.forEach(v),l=k(c),f=b(c,"DIV",{class:!0});var E=x(f);i=b(E,"A",{rel:!0,href:!0,target:!0});var T=x(i);m=Q(T,p),T.forEach(v),E.forEach(v),c.forEach(v),u=k(h),h.forEach(v),this.h()},h(){a.a=null,g(i,"rel","noopener noreferrer"),g(i,"href",d=e[7].link),g(i,"target","_blank"),g(f,"class","pt-4 text-right text-sm"),g(n,"class","card m-1 w-full p-4 lg:w-72 2xl:w-96")},m(o,h){O(o,n,h),_(n,t),_(t,r),a.m(s,r),_(t,l),_(t,f),_(f,i),_(i,m),_(n,u)},p(o,h){h&2&&s!==(s=o[7].html+"")&&a.p(s),h&2&&p!==(p=o[7].title+"")&&W(m,p),h&2&&d!==(d=o[7].link)&&g(i,"href",d)},d(o){o&&v(n)}}}function ye(e){let n,t,r,a="Enter search term:",s,l,f,i,p,m,d=H(e[1]),u=[];for(let o=0;o<d.length;o+=1)u[o]=M(D(e,d,o));return{c(){n=y("div"),t=y("label"),r=y("span"),r.textContent=a,s=L(),l=y("input"),f=L(),i=y("div");for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){n=b(o,"DIV",{class:!0});var h=x(n);t=b(h,"LABEL",{for:!0,class:!0});var c=x(t);r=b(c,"SPAN",{"data-svelte-h":!0}),z(r)!=="svelte-17iltyo"&&(r.textContent=a),s=k(c),l=b(c,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),c.forEach(v),f=k(h),i=b(h,"DIV",{class:!0});var S=x(i);for(let E=0;E<u.length;E+=1)u[E].l(S);S.forEach(v),h.forEach(v),this.h()},h(){g(l,"type","text"),g(l,"name","search"),g(l,"id","search"),g(l,"class","m-2 p-2 input"),g(l,"placeholder","..."),g(t,"for","search"),g(t,"class","label"),g(i,"class","flex flex-wrap justify-center"),g(n,"class","card container mx-auto p-4")},m(o,h){O(o,n,h),_(n,t),_(t,r),_(t,s),_(t,l),V(l,e[0]),_(n,f),_(n,i);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(i,null);p||(m=B(l,"input",e[4]),p=!0)},p(o,[h]){if(h&1&&l.value!==o[0]&&V(l,o[0]),h&2){d=H(o[1]);let c;for(c=0;c<d.length;c+=1){const S=D(o,d,c);u[c]?u[c].p(S,h):(u[c]=M(S),u[c].c(),u[c].m(i,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=d.length}},i:F,o:F,d(o){o&&v(n),G(u,o),p=!1,m()}}}function be(e,n,t){let{data:r}=n,a,s=[],l="",f=[];X(async()=>{a=r.course,C.set(r.course.lo),t(3,s=j("lab",r.course.lo.los))});function i(m){m.forEach(d=>{let u=[];d.fenced&&u.push(`~~~${d.language}`),u.push(d.contentMd),d.fenced&&u.push("~~~"),d.html=ee(u.join(`
`),a.url),d.link=`https://tutors.dev/${d.link}`})}function p(){l=this.value,t(0,l)}return e.$$set=m=>{"data"in m&&t(2,r=m.data)},e.$$.update=()=>{e.$$.dirty&11&&he(l)&&(t(1,f=se(s,l)),i(f))},[l,f,r,s,p]}class we extends Z{constructor(n){super(),$(this,n,be,ye,q,{data:2})}}export{we as component,Ie as universal};
